#!/bin/bash

exec </dev/tty

BRANCH="$(git rev-parse --abbrev-ref HEAD)"
if [[ "$BRANCH" = "master" ]] || [[ "$BRANCH" = "main" ]]; then
  while read -p "Do you really want to commit to master/main branch? (y/n) " yn; do
    case $yn in
    [Yy])
      echo "Committing to master branch"
      break
      ;;
    [Nn]) exit 1 ;;
    *) echo "Please answer y (yes) or n (no):" && continue ;;
    esac
  done

  exit 0
fi
