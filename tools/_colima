# ~/.zsh/completions/_colima-tools (or a file sourced from .zshrc)
autoload -Uz bashcompinit && bashcompinit

# paste the same bash function here:
_colima_tools_complete() {
  local cur prev words cword
  _init_completion -n : || return
  local TASKS="${HOME}/.nix-darwin/tools/colima.py"   # <- change me
  local out
  out=$(inv -r "$TASKS" --complete -- "${COMP_WORDS[@]:1}" 2>/dev/null) || return 0
  COMPREPLY=( $(compgen -W "$out" -- "$cur") )
}
complete -F _colima_tools_complete colima-tools
